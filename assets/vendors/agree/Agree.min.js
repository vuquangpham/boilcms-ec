/**
 * Agree v0.0.1
 * @author Vu Pham
 * @homepage https://github.com/vuquangpham/agree.js
 * @license MIT 2023
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var s in n)("object"==typeof exports?exports:e)[s]=n[s]}}(this,(()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){e.id=e.options.id,e.listeners.add(e.target,"click",s.bind(e));const t=function(e){const t=document.createElement("div");return t.setAttribute("data-agree-content",""),t.innerHTML=`\n<div data-agree-message>${e.options.messageHTML}</div>\n<div data-agree-button>\n    <div data-agree-confirm>${e.options.confirmButtonHTML}</div>\n    <div data-popup-toggle>${e.options.cancelButtonHTML}</div>\n</div>\n    `,t}(e);return e.popup=Popup.create({id:e.id,target:document.createElement("div"),popupContent:t,hasPreventDefault:!1,onAfterInit:t=>{t.popupContent.setAttribute("data-agree-wrapper",e.id)},onBeforeClose:t=>{e.events.trigger("cancel",[e])}}),e.listeners.add(t,"click",r.bind(e)),!0}function s(e){this.forceExecute?this.forceExecute=!1:(e.preventDefault(),this.popup.open())}function r(e){e.target.closest("[data-agree-confirm]")&&(this.forceExecute=!0,this.target.click(),this.events.trigger("confirm",[this]),this.options.closePopupAfterConfirmed&&this.popup.close())}function i(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Date.now().toString(36)+Math.random().toString(36).slice(2)}e.r(t);class o{constructor(){this.callbacks={}}on(e,t){if(void 0===e||""===e)return console.warn("Wrong names"),!1;if("function"!=typeof t)return console.warn("Wrong callback"),!1;return this.resolveNames(e).forEach((e=>{this.callbacks[e]instanceof Array||(this.callbacks[e]=[]),this.callbacks[e].push(t)})),this}off(e){if(void 0===e||""===e)return console.warn("Wrong name"),!1;return this.resolveNames(e).forEach((e=>{this.callbacks[e]&&this.callbacks[e]instanceof Array&&delete this.callbacks[e]})),this}trigger(e,t){if(void 0===e||""===e)return console.warn("Wrong name"),!1;const n=t instanceof Array?t:[];this.resolveNames(e).forEach((e=>{const t=this.callbacks[e];t&&t.forEach((e=>{e.apply(this,n)}))}))}resolveNames(e){let t=e;return t=t.replace(/[^a-zA-Z0-9 ,/.]/g,""),t=t.replace(/[,/]+/g," "),t.split(" ")}}const a="instance-enabled";const c=class{constructor(){this.instances=[]}add(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i();if(!e||!t||!n)return console.error("The input parameters don't exist. Please check it again!"),null;const r={target:e,name:t,handler:n,id:s};r.target.addEventListener(r.name,r.handler),this.instances.push(r)}destroy(e){const t=this.instances.findIndex((t=>t.id===e));if(-1===t)return null;const n=this.instances[t];return n.target.removeEventListener(n.name,n.handler),this.instances.splice(t,1),n}destroyAll(){this.instances.forEach((e=>{e.target.removeEventListener(e.name,e.handler)})),this.instances=[]}};class l{constructor(e){return this.options=e,this.target=e.target,this.target.classList.contains(a)?(console.error("The target has already initialized!"),null):(this.events=new o,this.listeners=new c,this.hasInitialized=n(this),this.hasInitialized?(this.forceExecute=!1,void this.target.classList.add(a)):null)}on(e,t){this.events.on(e,t)}destroy(){return this.listeners.destroyAll(),this.target.classList.remove(a),Agree.destroy(this)}}return window.Agree=new class{constructor(){this.instances=[]}create(e){const t={id:i(),target:"[data-agree]",messageHTML:"Please put some text inside here!!!!",confirmButtonHTML:"<button>Confirm</button>",cancelButtonHTML:"<button>Cancel</button>",closePopupAfterConfirmed:!0,...e};if(t.target=function(e){let t="Target element not found! Please use correct DOM element!";return"string"==typeof e&&(e=document.querySelector(e),t="Target string is not valid! Please use correct CSS selector!"),e||(console.error(t),!1)}(t.target),!t.target)return null;const n=new l(t);return n?(this.instances.push(n),n):null}get(e){return this.instances.find((t=>t.id===e))}destroy(e){const t=t=>t.id===e.id;if(!this.instances.find(t))return!1;const n=this.instances.findIndex(t);return this.instances.splice(n,1),!0}},t})()));