/**
 * Popup v0.0.1
 * @author Vu Pham
 * @homepage https://github.com/vuquangpham/popup.js
 * @license MIT 2023
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,(()=>(()=>{"use strict";var t={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Date.now().toString(36)+Math.random().toString(36).slice(2)}function o(t,e){t&&e&&Object.assign(t.style,e)}function i(t){return"function"==typeof t}function s(t){if(!t.isOpen)return r(t);a(t)}function r(t){var e;t.events.trigger("beforeOpen",[t]),o(t.popupContent,{visibility:"visible",opacity:1}),t.isOpen=!0,e=t,Popup.stacking.push(e),t.events.trigger("afterOpen",[t])}function a(t){t.events.trigger("beforeClose",[t]),o(t.popupContent,{visibility:"hidden",opacity:0}),t.isOpen=!1,function(t){const e=t.id,n=Popup.stacking.findIndex((t=>t.id===e));-1!==n&&Popup.stacking.splice(n,1)}(t),t.events.trigger("afterClose",[t])}function p(t){const e=t.target.getAttribute(t.options.triggerAttr)||t.options.id;let n;if(t.options.id=e,t.id=e,t.options.popupContent)switch(typeof t.options.popupContent){case"string":{const o=document.createElement("div");o.setAttribute(t.options.contentAttr,e),o.innerHTML=t.options.popupContent,n=o;break}case"object":n=t.options.popupContent}else{if(!e)return console.error(`You have to input the id for the trigger element inside the attribute ${t.options.triggerAttr}`,t.target),!1;n=document.querySelector(`[${t.options.contentAttr}="${e}"]`)}if(!n)return console.error("The popup content element doesn't exist!"),!1;t.popupContent=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=`\n<div data-popup-wrapper="${e}" style="${n?"":"visibility:hidden; opacity:0;"}">\n    <div data-popup-overflow>\n        <div data-popup-overlay data-popup-toggle></div>\n        <div data-popup-inner></div>\n    </div>\n</div>\n    `,i=document.createElement("div");return i.innerHTML=o,i.querySelector("[data-popup-inner]").appendChild(t),i.firstElementChild}(n,t.id,t.options.visibility),document.body.appendChild(t.popupContent);const o=c.bind(t);t.target.addEventListener("click",o),t.eventListeners.push({name:"click",target:t.target,handler:o});const s=l.bind(t);return t.popupContent.addEventListener("click",s),t.eventListeners.push({name:"click",target:t.popupContent,handler:s}),i(t.options.onAfterInit)&&t.events.on("afterInit",t.options.onAfterInit),i(t.options.onBeforeOpen)&&t.events.on("beforeOpen",t.options.onBeforeOpen),i(t.options.onAfterOpen)&&t.events.on("afterOpen",t.options.onAfterOpen),i(t.options.onBeforeClose)&&t.events.on("beforeClose",t.options.onBeforeClose),i(t.options.onAfterClose)&&t.events.on("afterClose",t.options.onAfterClose),!0}function c(t){this.options.hasPreventDefault&&t.preventDefault(),s(this)}function l(t){t.target.closest("[data-popup-toggle]")&&s(this)}t.r(e);class u{constructor(){this.callbacks={}}on(t,e){if(void 0===t||""===t)return console.warn("Wrong names"),!1;if("function"!=typeof e)return console.warn("Wrong callback"),!1;return this.resolveNames(t).forEach((t=>{this.callbacks[t]instanceof Array||(this.callbacks[t]=[]),this.callbacks[t].push(e)})),this}off(t){if(void 0===t||""===t)return console.warn("Wrong name"),!1;return this.resolveNames(t).forEach((t=>{this.callbacks[t]&&this.callbacks[t]instanceof Array&&delete this.callbacks[t]})),this}trigger(t,e){if(void 0===t||""===t)return console.warn("Wrong name"),!1;const n=e instanceof Array?e:[];this.resolveNames(t).forEach((t=>{const e=this.callbacks[t];e&&e.forEach((t=>{t.apply(this,n)}))}))}resolveNames(t){let e=t;return e=e.replace(/[^a-zA-Z0-9 ,/.]/g,""),e=e.replace(/[,/]+/g," "),e.split(" ")}}const d="instance-enabled";class f{constructor(t){return this.options=t,this.target=t.target,this.target.classList.contains(d)?(console.error("The target has already initialized!"),null):(this.events=new u,this.eventListeners=[],this.hasInitialized=p(this),this.hasInitialized?(this.target.classList.add(d),void this.events.trigger("afterInit",[this])):null)}on(t,e){this.events.on(t,e)}open(){r(this)}close(){a(this)}toggle(){s(this)}destroy(){return this.eventListeners.forEach((t=>{t.target.removeEventListener(t.name,t.handler)})),this.target.classList.remove(d),this.popupContent.remove(),Popup.destroy(this)}}return window.Popup=new class{constructor(){this.instances=[],this.stacking=[],window.addEventListener("keyup",(t=>{if(!("Escape"===t.key))return;const e=this.stacking.pop();e&&e.close()}))}create(t){const e={id:n(),target:"[data-popup]",popupContent:"",hasPreventDefault:!0,triggerAttr:"data-popup",contentAttr:"data-popup-content",visibility:!1,onAfterInit:t=>{},onBeforeOpen:t=>{},onAfterOpen:t=>{},onBeforeClose:t=>{},onAfterClose:t=>{},...t};if(e.target=function(t){let e="Target element not found! Please use correct DOM element!";return"string"==typeof t&&(t=document.querySelector(t),e="Target string is not valid! Please use correct CSS selector!"),t||(console.error(e),!1)}(e.target),!e.target)return null;const o=new f(e);return o?(this.instances.push(o),o):null}get(t){return this.instances.find((e=>e.id===t))}destroy(t){const e=e=>e.id===t.id;if(!this.instances.find(e))return!1;const n=this.instances.findIndex(e);return this.instances.splice(n,1),!0}},e})()));